<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administración - SOFT DUCK</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="nav-brand">
                <i class="fas fa-shield-halved"></i>
                <span>Panel Administrador</span>
            </div>
            
            <div class="nav-stats">
                <div class="stat-item">
                    <i class="fas fa-shopping-bag"></i>
                    <span id="totalOrders">0</span>
                    <small>Pedidos</small>
                </div>
                <div class="stat-item">
                    <i class="fas fa-dollar-sign"></i>
                    <span id="totalRevenue">$0</span>
                    <small>Ingresos</small>
                </div>
                <div class="stat-item">
                    <i class="fas fa-users"></i>
                    <span id="totalUsers">0</span>
                    <small>Usuarios</small>
                </div>
            </div>
        </nav>
    </header>

    <div class="tab-navigation">
        <button class="tab-button active" onclick="adminManager.switchTab('products')">
            <i class="fas fa-boxes-stacked"></i>
            Productos
        </button>
        <button class="tab-button" onclick="adminManager.switchTab('orders')">
            <i class="fas fa-shopping-bag"></i>
            Pedidos
        </button>
        <button class="tab-button" onclick="adminManager.switchTab('users')">
            <i class="fas fa-users"></i>
            Usuarios
        </button>
        <button class="tab-button" onclick="adminManager.switchTab('statistics')">
            <i class="fas fa-chart-line"></i>
            Estadísticas
        </button>
        <button class="tab-button" onclick="adminManager.switchTab('simulations')">
            <i class="fas fa-robot"></i>
            Simulaciones
        </button>
    </div>

    <div class="container">
        <!-- Products Tab -->
        <div id="productsTab" class="tab-content active">
            <div class="products-tab">
                <section class="form-section">
                    <div class="form-header">
                        <h2 class="form-title" id="formTitle">
                            <i class="fas fa-plus-circle"></i>
                            Agregar Producto
                        </h2>
                        <button class="cancel-btn" id="cancelEdit">
                            <i class="fas fa-times"></i>
                            Cancelar
                        </button>
                    </div>
                    
                    <form id="productForm">
                        <div class="form-group">
                            <label for="productName">
                                <i class="fas fa-tag"></i>
                                Nombre del Producto
                            </label>
                            <input type="text" id="productName" placeholder="Ingresa el nombre del producto" required>
                        </div>

                        <div class="form-group">
                            <label for="productDescription">
                                <i class="fas fa-align-left"></i>
                                Descripción Detallada
                            </label>
                            <textarea id="productDescription" placeholder="Describe las características y beneficios del producto" required></textarea>
                        </div>

                        <div class="form-row-quad">
                            <div class="form-group">
                                <label for="productPrice">
                                    <i class="fas fa-dollar-sign"></i>
                                    Precio Individual
                                </label>
                                <input type="number" id="productPrice" step="0.01" min="0" placeholder="0.00" required>
                            </div>
                            <div class="form-group">
                                <label for="productWholesalePrice">
                                    <i class="fas fa-users"></i>
                                    Precio Mayoreo
                                </label>
                                <input type="number" id="productWholesalePrice" step="0.01" min="0" placeholder="0.00" required>
                            </div>
                            <div class="form-group">
                                <label for="productWholesaleQuantity">
                                    <i class="fas fa-calculator"></i>
                                    Cantidad para Mayoreo
                                </label>
                                <input type="number" id="productWholesaleQuantity" min="2" placeholder="4" value="4" required>
                                <small style="color: var(--text-muted); font-size: 0.75rem; margin-top: 0.25rem; display: block;">
                                    Cantidad mínima para aplicar precio de mayoreo
                                </small>
                            </div>
                            <div class="form-group">
                                <label for="productStock">
                                    <i class="fas fa-boxes"></i>
                                    Stock Inicial
                                </label>
                                <input type="number" id="productStock" min="0" placeholder="0" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="productCategory">
                                <i class="fas fa-folder"></i>
                                Categoría
                            </label>
                            <input type="text" id="productCategory" placeholder="Ej: Electrónicos, Ropa, etc." required>
                        </div>

                        <!-- Enhanced Images Section -->
                        <div class="images-section">
                            <h3>
                                <i class="fas fa-images"></i>
                                Imágenes del Producto
                            </h3>
                            
                            <div class="image-upload-methods">
                                <button type="button" class="upload-method-btn active" data-method="url">
                                    <i class="fas fa-link"></i>
                                    Por URL
                                </button>
                                <button type="button" class="upload-method-btn" data-method="file">
                                    <i class="fas fa-upload"></i>
                                    Subir Archivos
                                </button>
                            </div>

                            <!-- URL Upload -->
                            <div class="upload-content active" id="urlUpload">
                                <div class="url-input-container">
                                    <input type="url" id="imageUrlInput" placeholder="https://ejemplo.com/imagen.jpg">
                                    <button type="button" class="add-url-btn" onclick="adminManager.addImageFromUrl()">
                                        <i class="fas fa-plus"></i>
                                        Agregar
                                    </button>
                                </div>
                                <small style="color: var(--text-muted); font-size: 0.75rem;">
                                    Formatos soportados: JPG, PNG, WebP, GIF
                                </small>
                            </div>

                            <!-- File Upload -->
                            <div class="upload-content" id="fileUpload">
                                <div class="file-upload-area" onclick="document.getElementById('fileInput').click()">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>Arrastra archivos aquí o haz clic para seleccionar</p>
                                    <small>PNG, JPG, WebP hasta 5MB cada uno</small>
                                </div>
                                <input type="file" id="fileInput" multiple accept="image/*" onchange="adminManager.handleFileSelect(event)">
                            </div>

                            <!-- Images Preview -->
                            <div class="images-preview" id="imagesPreview"></div>
                        </div>

                        <button type="submit" class="submit-btn">
                            <i class="fas fa-save"></i>
                            <span id="submitButtonText">Agregar Producto</span>
                        </button>
                    </form>
                </section>

                <section class="products-section">
                    <h2 class="section-title">
                        <i class="fas fa-boxes-stacked"></i>
                        Productos por Categoría
                    </h2>
                    <div class="products-grid" id="productsGrid">
                        <div class="loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <h3>Cargando productos</h3>
                            <p>Preparando el panel de administración</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- Orders Tab -->
        <div id="ordersTab" class="tab-content">
            <section class="orders-section">
                <h2 class="section-title">
                    <i class="fas fa-shopping-bag"></i>
                    Pedidos por Cliente
                </h2>
                <div id="ordersGrid">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <h3>Cargando pedidos</h3>
                        <p>Obteniendo información de pedidos</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- Users Tab -->
        <div id="usersTab" class="tab-content">
            <section class="users-section">
                <h2 class="section-title">
                    <i class="fas fa-users"></i>
                    Usuarios Registrados
                </h2>
                <div id="usersGrid">
                    <div class="loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <h3>Cargando usuarios</h3>
                        <p>Obteniendo información de usuarios</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- Advanced Statistics Tab -->
        <div id="statisticsTab" class="tab-content">
            <section class="statistics-section">
                <div class="stats-header">
                    <h2 class="section-title">
                        <i class="fas fa-chart-line"></i>
                        Análisis Estadístico Avanzado con Monte Carlo
                    </h2>
                    <div class="stats-subtitle">
                        Simulaciones predictivas basadas en datos históricos y temporadas
                    </div>
                </div>
                
                <!-- Advanced Controls Panel -->
                <div class="advanced-controls-panel">
                    <div class="controls-row">
                        <!-- Time Period Selection -->
                        <div class="control-group">
                            <label for="periodSelector">
                                <i class="fas fa-calendar-alt"></i>
                                Período de Análisis
                            </label>
                            <select id="periodSelector" class="control-select">
                                <option value="current-month">Mes Actual</option>
                                <option value="last-3-months">Últimos 3 Meses</option>
                                <option value="last-6-months">Últimos 6 Meses</option>
                                <option value="current-year">Año Actual</option>
                                <option value="custom">Personalizado</option>
                            </select>
                        </div>

                        <!-- Month Selection -->
                        <div class="control-group">
                            <label for="monthSelector">
                                <i class="fas fa-calendar"></i>
                                Mes Específico
                            </label>
                            <select id="monthSelector" class="control-select">
                                <option value="1">Enero</option>
                                <option value="2">Febrero</option>
                                <option value="3">Marzo</option>
                                <option value="4">Abril</option>
                                <option value="5">Mayo</option>
                                <option value="6">Junio</option>
                                <option value="7">Julio</option>
                                <option value="8">Agosto</option>
                                <option value="9">Septiembre</option>
                                <option value="10">Octubre</option>
                                <option value="11">Noviembre</option>
                                <option value="12">Diciembre</option>
                            </select>
                        </div>

                        <!-- Season Analysis -->
                        <div class="control-group">
                            <label for="seasonSelector">
                                <i class="fas fa-leaf"></i>
                                Temporada
                            </label>
                            <select id="seasonSelector" class="control-select">
                                <option value="all">Todas las Temporadas</option>
                                <option value="spring">Primavera (Mar-May)</option>
                                <option value="summer">Verano (Jun-Ago)</option>
                                <option value="autumn">Otoño (Sep-Nov)</option>
                                <option value="winter">Invierno (Dic-Feb)</option>
                            </select>
                        </div>
                    </div>

                    <div class="controls-row">
                        <!-- Monte Carlo Settings -->
                        <div class="control-group">
                            <label for="montecarloSimulations">
                                <i class="fas fa-random"></i>
                                Simulaciones Monte Carlo
                            </label>
                            <select id="montecarloSimulations" class="control-select">
                                <option value="1000">1,000 simulaciones</option>
                                <option value="5000">5,000 simulaciones</option>
                                <option value="10000">10,000 simulaciones</option>
                                <option value="50000">50,000 simulaciones</option>
                            </select>
                        </div>

                        <!-- Risk Level -->
                        <div class="control-group">
                            <label for="riskLevel">
                                <i class="fas fa-exclamation-triangle"></i>
                                Nivel de Riesgo
                            </label>
                            <select id="riskLevel" class="control-select">
                                <option value="conservative">Conservador (95% confianza)</option>
                                <option value="moderate">Moderado (90% confianza)</option>
                                <option value="aggressive">Agresivo (85% confianza)</option>
                            </select>
                        </div>

                        <!-- Analysis Type -->
                        <div class="control-group">
                            <label for="analysisType">
                                <i class="fas fa-cogs"></i>
                                Tipo de Análisis
                            </label>
                            <select id="analysisType" class="control-select">
                                <option value="sales-prediction">Predicción de Ventas</option>
                                <option value="inventory-optimization">Optimización de Inventario</option>
                                <option value="seasonal-trends">Tendencias Estacionales</option>
                                <option value="product-performance">Rendimiento de Productos</option>
                            </select>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="controls-actions">
                        <button id="runAnalysisBtn" class="run-analysis-btn">
                            <i class="fas fa-play-circle"></i>
                            Ejecutar Análisis Monte Carlo
                        </button>
                        <button id="exportResultsBtn" class="export-btn">
                            <i class="fas fa-download"></i>
                            Exportar Resultados
                        </button>
                        <button id="resetAnalysisBtn" class="reset-btn">
                            <i class="fas fa-refresh"></i>
                            Reiniciar
                        </button>
                    </div>
                </div>

                <!-- Real-time Statistics Overview -->
                <div class="stats-overview">
                    <div class="overview-card">
                        <div class="overview-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="overview-content">
                            <h4>Ventas Proyectadas</h4>
                            <span class="overview-value" id="projectedSales">$0</span>
                            <small class="overview-change" id="salesChange">+0%</small>
                        </div>
                    </div>
                    <div class="overview-card">
                        <div class="overview-icon">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="overview-content">
                            <h4>Stock Recomendado</h4>
                            <span class="overview-value" id="recommendedStock">0</span>
                            <small class="overview-change" id="stockEfficiency">0% eficiencia</small>
                        </div>
                    </div>
                    <div class="overview-card">
                        <div class="overview-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="overview-content">
                            <h4>Producto Top</h4>
                            <span class="overview-value" id="topProduct">N/A</span>
                            <small class="overview-change" id="topProductPerformance">0% share</small>
                        </div>
                    </div>
                    <div class="overview-card">
                        <div class="overview-icon">
                            <i class="fas fa-thermometer-half"></i>
                        </div>
                        <div class="overview-content">
                            <h4>Confianza Modelo</h4>
                            <span class="overview-value" id="modelConfidence">0%</span>
                            <small class="overview-change" id="modelAccuracy">N/A precisión</small>
                        </div>
                    </div>
                </div>

                <!-- Advanced Charts Container -->
                <div class="advanced-charts-container">
                    <!-- Monte Carlo Simulation Results -->
                    <div class="chart-card full-width">
                        <div class="chart-header">
                            <h3>
                                <i class="fas fa-random"></i>
                                Simulación Monte Carlo - Distribución de Resultados
                            </h3>
                            <div class="chart-controls">
                                <button class="chart-btn" onclick="statisticsManager.toggleChartType('montecarlo')">
                                    <i class="fas fa-exchange-alt"></i>
                                </button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="montecarloChart"></canvas>
                        </div>
                        <div class="chart-insights" id="montecarloInsights">
                            <div class="insight-item">
                                <span class="insight-label">Escenario Optimista:</span>
                                <span class="insight-value" id="optimisticScenario">$0</span>
                            </div>
                            <div class="insight-item">
                                <span class="insight-label">Escenario Probable:</span>
                                <span class="insight-value" id="likelyScenario">$0</span>
                            </div>
                            <div class="insight-item">
                                <span class="insight-label">Escenario Pesimista:</span>
                                <span class="insight-value" id="pessimisticScenario">$0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Sales by Month -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>
                                <i class="fas fa-calendar-alt"></i>
                                Análisis Temporal por Meses
                            </h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="monthlyAnalysisChart"></canvas>
                        </div>
                    </div>

                    <!-- Seasonal Analysis -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>
                                <i class="fas fa-leaf"></i>
                                Tendencias Estacionales
                            </h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="seasonalChart"></canvas>
                        </div>
                    </div>

                    <!-- Product Performance Matrix -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>
                                <i class="fas fa-th"></i>
                                Matriz de Rendimiento de Productos
                            </h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="performanceMatrixChart"></canvas>
                        </div>
                    </div>

                    <!-- Risk Analysis -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>
                                <i class="fas fa-shield-alt"></i>
                                Análisis de Riesgo por Categoría
                            </h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="riskAnalysisChart"></canvas>
                        </div>
                    </div>

                    <!-- Inventory Optimization -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>
                                <i class="fas fa-warehouse"></i>
                                Optimización de Inventario
                            </h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="inventoryOptimizationChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Detailed Results Table -->
                <div class="results-table-container">
                    <div class="table-header">
                        <h3>
                            <i class="fas fa-table"></i>
                            Resultados Detallados de la Simulación
                        </h3>
                        <div class="table-filters">
                            <input type="text" id="tableSearch" placeholder="Buscar en resultados..." class="table-search">
                            <select id="tableSort" class="table-sort">
                                <option value="confidence-desc">Confianza (Mayor a Menor)</option>
                                <option value="profit-desc">Ganancia (Mayor a Menor)</option>
                                <option value="risk-asc">Riesgo (Menor a Mayor)</option>
                                <option value="alphabetical">Alfabético</option>
                            </select>
                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table id="resultsTable" class="results-table">
                            <thead>
                                <tr>
                                    <th>Producto</th>
                                    <th>Categoría</th>
                                    <th>Mes Óptimo</th>
                                    <th>Ventas Proyectadas</th>
                                    <th>Confianza</th>
                                    <th>Riesgo</th>
                                    <th>ROI Esperado</th>
                                    <th>Stock Recomendado</th>
                                </tr>
                            </thead>
                            <tbody id="resultsTableBody">
                                <tr>
                                    <td colspan="8" class="table-loading">
                                        <i class="fas fa-calculator"></i>
                                        Ejecuta el análisis para ver resultados detallados
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>

        <!-- Sales Simulations Tab -->
        <div id="simulationsTab" class="tab-content">
            <section class="simulations-section">
                <div class="simulations-header">
                    <h2 class="section-title">
                        <i class="fas fa-robot"></i>
                        Simulaciones de Ventas por Quincena
                    </h2>
                    <div class="simulations-subtitle">
                        Genera pedidos reales automáticamente usando tus productos de Firebase. Las ventas se simulan por quincenas y se guardan en la base de datos.
                    </div>
                </div>

                <!-- Simulation Controls -->
                <div class="simulation-controls-panel">
                    <div class="controls-row">
                        <div class="control-group">
                            <label for="simulationMode">
                                <i class="fas fa-cogs"></i>
                                Modo de Simulación
                            </label>
                            <select id="simulationMode" class="control-select">
                                <option value="realistic">Realista (Basado en datos históricos)</option>
                                <option value="optimistic">Optimista (Ventas altas)</option>
                                <option value="pessimistic">Pesimista (Ventas bajas)</option>
                                <option value="seasonal">Estacional (Por temporadas)</option>
                                <option value="random">Aleatorio (Variedad completa)</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="simulationDuration">
                                <i class="fas fa-clock"></i>
                                Duración de Simulación (Quincenas)
                            </label>
                            <select id="simulationDuration" class="control-select">
                                <option value="1">1 quincena</option>
                                <option value="2" selected>1 mes (2 quincenas)</option>
                                <option value="6">3 meses (6 quincenas)</option>
                                <option value="12">6 meses (12 quincenas)</option>
                                <option value="24">1 año (24 quincenas)</option>
                            </select>
                        </div>

                        <div class="control-group">
                            <label for="customerCount">
                                <i class="fas fa-users"></i>
                                Cantidad de Clientes por Quincena
                            </label>
                            <input type="number" id="customerCount" class="control-input" value="5" min="1" max="50" placeholder="Número de clientes">
                            <small class="control-help">Número de clientes que harán pedidos cada quincena</small>
                        </div>

                        <div class="control-group">
                            <label for="simulationSpeed">
                                <i class="fas fa-tachometer-alt"></i>
                                Velocidad de Simulación
                            </label>
                            <select id="simulationSpeed" class="control-select">
                                <option value="slow">Lenta (1x tiempo real)</option>
                                <option value="normal" selected>Normal (10x tiempo real)</option>
                                <option value="fast">Rápida (100x tiempo real)</option>
                                <option value="instant">Instantánea</option>
                            </select>
                        </div>
                    </div>

                    <div class="controls-row">
                        <div class="control-group">
                            <label for="autoStart">
                                <i class="fas fa-play-circle"></i>
                                Inicio Automático
                            </label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="autoStart" checked>
                                <label for="autoStart" class="toggle-label">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="control-group">
                            <label for="notifications">
                                <i class="fas fa-bell"></i>
                                Notificaciones
                            </label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="notifications" checked>
                                <label for="notifications" class="toggle-label">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="control-group">
                            <label for="autoStop">
                                <i class="fas fa-stop-circle"></i>
                                Parada Automática
                            </label>
                            <div class="toggle-switch">
                                <input type="checkbox" id="autoStop">
                                <label for="autoStop" class="toggle-label">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="simulation-actions">
                        <button id="startSimulationBtn" class="start-simulation-btn">
                            <i class="fas fa-play"></i>
                            Iniciar Simulación
                        </button>
                        <button id="pauseSimulationBtn" class="pause-simulation-btn" disabled>
                            <i class="fas fa-pause"></i>
                            Pausar
                        </button>
                        <button id="stopSimulationBtn" class="stop-simulation-btn" disabled>
                            <i class="fas fa-stop"></i>
                            Detener
                        </button>
                        <button id="resetSimulationBtn" class="reset-simulation-btn">
                            <i class="fas fa-refresh"></i>
                            Reiniciar
                        </button>
                        <button id="reloadFirebaseBtn" class="reset-simulation-btn">
                            <i class="fas fa-sync"></i>
                            Recargar Firebase
                        </button>
                    </div>
                </div>

                <!-- Real-time Simulation Dashboard -->
                <div class="simulation-dashboard">
                    <div class="dashboard-card">
                        <div class="dashboard-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="dashboard-content">
                            <h4>Ventas Simuladas</h4>
                            <span class="dashboard-value" id="simulatedSales">$0</span>
                            <small class="dashboard-change" id="salesTrend">+0%</small>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="dashboard-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="dashboard-content">
                            <h4>Ganancias</h4>
                            <span class="dashboard-value profit" id="totalProfit">$0</span>
                            <small class="dashboard-change" id="profitMargin">0% margen</small>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="dashboard-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="dashboard-content">
                            <h4>Pérdidas</h4>
                            <span class="dashboard-value loss" id="totalLosses">$0</span>
                            <small class="dashboard-change" id="lossRate">0% tasa</small>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="dashboard-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="dashboard-content">
                            <h4>Pedidos</h4>
                            <span class="dashboard-value" id="totalOrders">0</span>
                            <small class="dashboard-change" id="orderRate">0/min</small>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="dashboard-icon">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="dashboard-content">
                            <h4>Productos Vendidos</h4>
                            <span class="dashboard-value" id="productsSold">0</span>
                            <small class="dashboard-change" id="topCategory">N/A</small>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <div class="dashboard-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="dashboard-content">
                            <h4>Clientes Simulados</h4>
                            <span class="dashboard-value" id="simulatedCustomers">0</span>
                            <small class="dashboard-change" id="customerGrowth">+0%</small>
                        </div>
                    </div>
                </div>

                <!-- Simulation Log -->
                <div class="simulation-log-container">
                    <div class="log-header">
                        <h3>
                            <i class="fas fa-list-alt"></i>
                            Registro de Simulación en Tiempo Real
                        </h3>
                        <div class="log-controls">
                            <button id="clearLogBtn" class="clear-log-btn">
                                <i class="fas fa-trash"></i>
                                Limpiar
                            </button>
                            <button id="exportLogBtn" class="export-log-btn">
                                <i class="fas fa-download"></i>
                                Exportar
                            </button>
                        </div>
                    </div>
                    <div class="log-content" id="simulationLog">
                        <div class="log-entry info">
                            <span class="log-time">00:00:00</span>
                            <span class="log-message">Sistema de simulación listo. Configura los parámetros y presiona "Iniciar Simulación".</span>
                        </div>
                    </div>
                </div>

                <!-- Category Performance -->
                <div class="category-performance-container">
                    <h3>
                        <i class="fas fa-chart-bar"></i>
                        Rendimiento por Categoría (Top 10)
                    </h3>
                    <div class="category-performance-grid" id="categoryPerformanceGrid">
                        <!-- Las 10 categorías se generarán dinámicamente -->
                    </div>
                </div>

                <!-- Simulation Charts -->
                <div class="simulation-charts-container">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>
                                <i class="fas fa-chart-area"></i>
                                Ventas en Tiempo Real
                            </h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="realtimeSalesChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>
                                <i class="fas fa-chart-pie"></i>
                                Distribución por Categoría
                            </h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="categoryDistributionChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>
                                <i class="fas fa-chart-line"></i>
                                Ganancias vs Pérdidas
                            </h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="profitLossChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Enhanced thermal ticket template with complete customer information -->
    <div id="thermalTicket" class="thermal-ticket" style="display: none;">
        <div class="ticket-header">
            <div class="ticket-title">SOFT DUCK</div>
            <div class="ticket-subtitle">LOS MEJORES PRODUCTOS, AL MEJOR PRECIO</div>
            <div class="ticket-date" id="ticketDate"></div>
        </div>

        <div class="ticket-order-id" id="ticketOrderId"></div>

        <div class="ticket-customer-info">
            <div class="ticket-customer-name" id="ticketCustomerName"></div>
            <div class="ticket-customer-details" id="ticketCustomerPhone"></div>
            <div class="ticket-customer-details" id="ticketCustomerEmail"></div>
        </div>

        <div class="ticket-delivery-info" id="ticketDeliveryInfo"></div>

        <div class="ticket-items" id="ticketItems"></div>

        <div class="ticket-separator"></div>

        <div class="ticket-footer">
            <div class="ticket-total" id="ticketTotal"></div>
            <div class="ticket-thanks">¡GRACIAS POR TU COMPRA!</div>
            <div class="ticket-thanks">VUELVE PRONTO</div>
            <div class="ticket-contact">WhatsApp: +52 56 2727 4791</div>
            <div class="tickeimage.pngt-contact">Email: vhjocar@gmail.com</div>
        </div>
    </div>
    
    <!-- Chart.js para estadísticas (versiones específicas) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.1.0/dist/chartjs-plugin-annotation.min.js"></script>
    
    <script type="module">
        import { adminManager } from './admin.js';
        window.adminManager = adminManager;
    </script>
    
    <!-- Simulation Engine Script -->
    <script src="simulation-engine.js"></script>
    <script>
        // Initialize simulation engine when page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.simulationEngine = new SalesSimulationEngine();
        });
    </script>

</body>
</html>